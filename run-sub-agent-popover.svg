<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="800" viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .bg { fill: #eef2f7; }
      .panel { fill: #ffffff; stroke: #e2e8f0; stroke-width: 1; }
      .panel-soft { fill: #f8fafc; stroke: #e2e8f0; stroke-width: 1; }
      .panel-subtle { fill: #f1f5f9; }
      .muted { fill: #64748b; font: 12px "Inter", "Arial", sans-serif; }
      .label { fill: #0f172a; font: 12px "Inter", "Arial", sans-serif; }
      .title { fill: #0f172a; font: 600 16px "Inter", "Arial", sans-serif; }
      .section { fill: #0f172a; font: 600 12px "Inter", "Arial", sans-serif; letter-spacing: 0.2px; }
      .chip { fill: #eef2ff; stroke: #c7d2fe; stroke-width: 1; }
      .chip-text { fill: #4338ca; font: 11px "Inter", "Arial", sans-serif; }
      .chip-warn { fill: #fef3c7; stroke: #fde68a; stroke-width: 1; }
      .chip-warn-text { fill: #b45309; font: 11px "Inter", "Arial", sans-serif; }
      .accent { fill: #6366f1; }
      .divider { stroke: #e2e8f0; stroke-width: 1; }
      .track { stroke: #c7d2fe; stroke-width: 2; }
      .mono { fill: #0f172a; font: 11px "SFMono-Regular", "Menlo", "Consolas", monospace; }
      .small { fill: #64748b; font: 10px "Inter", "Arial", sans-serif; }
      .scroll-track { fill: #e2e8f0; }
      .scroll-thumb { fill: #c7d2fe; }
    </style>
    <clipPath id="timeline-clip" clipPathUnits="userSpaceOnUse">
      <rect x="480" y="262" width="620" height="260" rx="12" />
    </clipPath>
  </defs>

  <rect class="bg" x="0" y="0" width="1200" height="800" />

  <!-- Trigger badge -->
  <rect x="128" y="110" width="150" height="30" rx="999" fill="#ffffff" stroke="#c7d2fe" />
  <circle cx="144" cy="125" r="5" fill="#22c55e" />
  <circle cx="164" cy="125" r="6" fill="#eef2ff" />
  <circle cx="164" cy="125" r="2" fill="#6366f1" />
  <text class="label" x="182" y="129">run_sub_agent</text>

  <!-- Popover card -->
  <rect class="panel" x="170" y="150" width="960" height="560" rx="16" />
  <rect class="panel-subtle" x="170" y="150" width="960" height="72" rx="16" />

  <!-- Header -->
  <circle cx="200" cy="186" r="14" fill="#eef2ff" />
  <text class="title" x="222" y="190">run_sub_agent</text>
  <text class="muted" x="222" y="208">job_42 - design-ops v2.1 - gpt-4.1</text>

  <rect class="chip" x="790" y="170" width="64" height="24" rx="999" />
  <text class="chip-text" x="806" y="186">Agent</text>
  <rect class="chip-warn" x="860" y="170" width="74" height="24" rx="999" />
  <text class="chip-warn-text" x="876" y="186">Running</text>
  <rect class="chip" x="940" y="170" width="64" height="24" rx="999" />
  <text class="chip-text" x="956" y="186">Live</text>

  <rect class="panel" x="1012" y="168" width="32" height="28" rx="8" />
  <rect class="panel" x="1048" y="168" width="32" height="28" rx="8" />
  <rect class="panel" x="1084" y="168" width="32" height="28" rx="8" />
  <text class="small" x="1020" y="186">Args</text>
  <text class="small" x="1056" y="186">Result</text>
  <text class="small" x="1092" y="186">Expand</text>

  <line class="divider" x1="170" y1="222" x2="1130" y2="222" />

  <!-- Columns split -->
  <line class="divider" x1="460" y1="222" x2="460" y2="710" />

  <!-- Left column: summary -->
  <text class="section" x="200" y="252">Summary</text>

  <rect class="panel-soft" x="190" y="262" width="250" height="52" rx="12" />
  <text class="muted" x="204" y="282">Agent</text>
  <text class="label" x="204" y="300">design-ops / v2.1</text>

  <rect class="panel-soft" x="190" y="320" width="250" height="52" rx="12" />
  <text class="muted" x="204" y="340">Skills</text>
  <text class="label" x="204" y="358">ui, svg, product</text>

  <rect class="panel-soft" x="190" y="378" width="250" height="52" rx="12" />
  <text class="muted" x="204" y="398">Model</text>
  <text class="label" x="204" y="416">gpt-4.1 mini</text>

  <rect class="panel-soft" x="190" y="436" width="250" height="52" rx="12" />
  <text class="muted" x="204" y="456">Command</text>
  <text class="label" x="204" y="474">design:layout</text>

  <text class="section" x="200" y="520">Task</text>
  <rect class="panel-soft" x="190" y="530" width="250" height="68" rx="12" />
  <text class="muted" x="204" y="550">Redesign run_sub_agent</text>
  <text class="muted" x="204" y="568">popover + fullscreen</text>

  <text class="section" x="200" y="620">Stats</text>
  <rect class="panel-soft" x="190" y="630" width="78" height="52" rx="12" />
  <rect class="panel-soft" x="276" y="630" width="78" height="52" rx="12" />
  <rect class="panel-soft" x="362" y="630" width="78" height="52" rx="12" />
  <text class="label" x="204" y="652">12.4s</text>
  <text class="small" x="204" y="668">elapsed</text>
  <text class="label" x="292" y="652">5</text>
  <text class="small" x="292" y="668">tools</text>
  <text class="label" x="378" y="652">12</text>
  <text class="small" x="378" y="668">steps</text>

  <!-- Right column: timeline -->
  <text class="section" x="490" y="252">Process timeline</text>
  <rect class="panel" x="480" y="262" width="620" height="260" rx="12" />
  <g clip-path="url(#timeline-clip)">
    <line class="track" x1="500" y1="270" x2="500" y2="505" />

    <rect class="panel-soft" x="516" y="262" width="584" height="44" rx="10" />
    <circle cx="500" cy="284" r="6" class="accent" />
    <text class="label" x="528" y="282">1. Plan layout</text>
    <text class="small" x="856" y="282">1.4s</text>
    <text class="small" x="528" y="300">Outline sections + chips</text>

    <rect class="panel-soft" x="516" y="312" width="584" height="44" rx="10" />
    <circle cx="500" cy="334" r="6" class="accent" />
    <text class="label" x="528" y="332">2. Draft fullscreen</text>
    <text class="small" x="856" y="332">2.2s</text>
    <text class="small" x="528" y="350">Split view, output, raw</text>

    <rect class="panel-soft" x="516" y="362" width="584" height="44" rx="10" />
    <circle cx="500" cy="384" r="6" class="accent" />
    <text class="label" x="528" y="382">3. Tool call svg_writer</text>
    <text class="small" x="856" y="382">0.8s</text>
    <text class="small" x="528" y="400">call_id t_12</text>

    <rect class="panel-soft" x="516" y="412" width="584" height="44" rx="10" />
    <circle cx="500" cy="434" r="6" class="accent" />
    <text class="label" x="528" y="432">4. Tool result svg_writer</text>
    <text class="small" x="856" y="432">0.3s</text>
    <text class="small" x="528" y="450">Saved SVG files</text>

    <rect class="panel-soft" x="516" y="462" width="584" height="44" rx="10" />
    <circle cx="500" cy="484" r="6" class="accent" />
    <text class="label" x="528" y="482">5. Final response</text>
    <text class="small" x="856" y="482">0.5s</text>
    <text class="small" x="528" y="500">Summary + next steps</text>
  </g>
  <rect class="scroll-track" x="1088" y="278" width="8" height="228" rx="4" />
  <rect class="scroll-thumb" x="1088" y="320" width="8" height="72" rx="4" />

  <text class="section" x="490" y="540">Result preview</text>
  <rect class="panel-soft" x="480" y="550" width="620" height="98" rx="12" />
  <text class="mono" x="498" y="572">- Popover: compact summary + live steps</text>
  <text class="mono" x="498" y="590">- Fullscreen: split view + timeline</text>
  <text class="mono" x="498" y="608">- Raw JSON toggles in sidebar</text>

  <text class="small" x="480" y="678">Tip: click expand for full timeline &amp; raw JSON.</text>
</svg>
